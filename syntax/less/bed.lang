# Bed language definition file for less pipe
# bioSyntax
# Depends on sam.style + bioSyntax.outlang
# 

# Comment or UCSC Track information
# is lines beginning with "#""
comment start "#"
#environment comment = "#" begin
#  drop = '$' exitall #drop at end of line
#  comment = "[.]+"
#end

# Bed Data
# Column 1: chr name
environment push1 start '^(?=[A-Za-z])' begin
  drop = '$' exitall # stops multi-line searching
  chr = '^\S+'

  # Column 2: chr start
  environment push2 = '\t?' begin
    drop = '(?=$)' exitall
    chrStart = '\A\d+'

    # Column 3: chr end
    environment push3 = '\t?' begin
      drop = '(?=$)' exitall
      chrStart = '\A\d+'

      # Column 4: entry name
      environment push4 = '\t?' begin
        drop = '(?=$)' exitall
        null = '\A\S+'

        # Column 5: score (0-1000)
        # TODO make full range; currently 0-100 by ~200s
        environment push5 = '\t?' begin
          drop = '(?=$)' exitall
          grad00 = '\A0(?=\t)'
          grad0 = '\A[1-9](?=\t)'
          grad0 = '\A[1-9][0-9](?=\t)'
          grad1 = '\A[12][0-9][0-9](?=\t)'
          grad2 = '\A[34][0-9][0-9](?=\t)'
          grad3 = '\A[56][0-9][0-9](?=\t)'
          grad4 = '\A[78][0-9][0-9](?=\t)'
          grad5 = '\A\d+(?=\t)'

          # Column 6: Feature Strand
          environment push6 = '\t?' begin
            drop = '(?=$)' exitall
            ntT = '\A\+'
            ntG = '\A\-'
            ntN = '\A\S'

          end #col6
        end # col5
      end # col4
    end # col3
  end # col2
end # bed data section
